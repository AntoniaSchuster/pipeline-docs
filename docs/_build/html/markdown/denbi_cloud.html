

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running jobs on denbi cloud &mdash; QBiC analysis documentation dev documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Pipeline releases" href="pipeline_releases.html" />
    <link rel="prev" title="Submitting jobs to the cluster" href="running_jobs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> QBiC analysis documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="running_jobs.html">Submitting jobs to the cluster</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Running jobs on denbi cloud</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#access-to-a-project">Access to a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-an-instance">Create an instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ssh-to-an-instance">SSH to an instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attach-and-mount-volumes">Attach and mount volumes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipeline_releases.html">Pipeline releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="rnaseq.html">RNAseq analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="exomeseq.html">Exome seq analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="ampliseq.html">16S amplicon sequencing</a></li>
<li class="toctree-l1"><a class="reference internal" href="hlatyping.html">HLA typing</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="igenomes.html">Updating igenomes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QBiC analysis documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Running jobs on denbi cloud</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/markdown/denbi_cloud.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-jobs-on-denbi-cloud">
<h1>Running jobs on denbi cloud<a class="headerlink" href="#running-jobs-on-denbi-cloud" title="Permalink to this headline">¶</a></h1>
<div class="section" id="access-to-a-project">
<h2>Access to a project<a class="headerlink" href="#access-to-a-project" title="Permalink to this headline">¶</a></h2>
<p>Either request a project to <a class="reference external" href="cloud.denbi.de">deNBI cloud</a> or ask someone at QBiC if they can create an instance for you in one of their projects.</p>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation on how to create instances and other important things is collected on the <a class="reference external" href="https://cloud.denbi.de/wiki/Compute_Center/Tuebingen">deNBI Tübingen page</a>. This documentation is not perfect, though, and I found it useful to add a few more notes here.</p>
</div>
<div class="section" id="create-an-instance">
<h2>Create an instance<a class="headerlink" href="#create-an-instance" title="Permalink to this headline">¶</a></h2>
<p>Go to the menu: Compute -&gt; Instances -&gt; Launch Instance button.</p>
<ul class="simple">
<li><p>Details: add an Instance Name</p></li>
<li><p>Source: select either “Image” for a generic image e.g. CentOS operating system, or “Instance Snapshot” for creating an Instance from a previous snapshot. For running <code class="docutils literal notranslate"><span class="pre">Nextflow</span></code> workflows, you can use the Instance Snapshot <code class="docutils literal notranslate"><span class="pre">nextflow-singularity</span></code> which already has <code class="docutils literal notranslate"><span class="pre">java-jdk12</span></code>, <code class="docutils literal notranslate"><span class="pre">Nextflow</span></code>, <code class="docutils literal notranslate"><span class="pre">Singularity</span></code> and <code class="docutils literal notranslate"><span class="pre">Docker</span></code> installed (check if Nextflow should be updated with <code class="docutils literal notranslate"><span class="pre">nextflow</span> <span class="pre">self-update</span></code>).</p></li>
<li><p>Flavour: select the instance flavour (number of CPUs and RAM).</p></li>
<li><p>Networks: select <code class="docutils literal notranslate"><span class="pre">denbi_uni_tuebingen_external</span></code> network.</p></li>
<li><p>Network Ports: leave empty.</p></li>
<li><p>Security Groups: add <code class="docutils literal notranslate"><span class="pre">default</span></code> AND <code class="docutils literal notranslate"><span class="pre">external_access</span></code>.</p></li>
<li><p>Key Pair: add a new key pair or select yours. Only one Key Pair is allowed per instance and if you lose the private key you will not be able to access the instance any more!</p></li>
<li><p>Rest of fields: leave default.</p></li>
<li><p>Press on <code class="docutils literal notranslate"><span class="pre">create</span> <span class="pre">instance</span></code></p></li>
</ul>
<p>You should now see your image being Spawn on the Instance dashboard. It might take several minutes to spawn, especially if created from an Instance Snapshot.</p>
</div>
<div class="section" id="ssh-to-an-instance">
<h2>SSH to an instance<a class="headerlink" href="#ssh-to-an-instance" title="Permalink to this headline">¶</a></h2>
<p>To ssh to an instance, you need the private key of the Key Pair that was used to create the instance, and the instance IP address.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -i /path/to/private/ssh-key &lt;username&gt;@&lt;IP&gt;
</pre></div>
</div>
<p>The username is the name of the operating system that was used in the image. For the <code class="docutils literal notranslate"><span class="pre">nextflow-singularity</span></code> instance snapshot, it is <code class="docutils literal notranslate"><span class="pre">centos</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -i /path/to/private/ssh-key centos@&lt;IP&gt;
</pre></div>
</div>
</div>
<div class="section" id="attach-and-mount-volumes">
<h2>Attach and mount volumes<a class="headerlink" href="#attach-and-mount-volumes" title="Permalink to this headline">¶</a></h2>
<p>In order to use an external cinder volume, you need to first create one on the OpenStack interface. Give the volume name and the amount of storage that you need (cannot exceed the total allowed for the project) and create a new empty volume (no image).</p>
<ul class="simple">
<li><p>Attach volume: on the volumes dashboard, under Actions for your volume click the arrow and select <code class="docutils literal notranslate"><span class="pre">manage</span> <span class="pre">attachments</span></code>. Attach the volume to your running instance.</p></li>
<li><p>Mount volume: Follow the <a class="reference external" href="https://cloud.denbi.de/wiki/Compute_Center/Tuebingen/#using-cinder-volumes">instructions</a> to mount the attached volume to your instance. Use <code class="docutils literal notranslate"><span class="pre">sudo</span></code> if you get any <code class="docutils literal notranslate"><span class="pre">permission</span> <span class="pre">denied</span></code> or <code class="docutils literal notranslate"><span class="pre">only</span> <span class="pre">root</span> <span class="pre">can</span> <span class="pre">do</span> <span class="pre">that</span></code> messages. Also you might need to <code class="docutils literal notranslate"><span class="pre">chown</span></code> and <code class="docutils literal notranslate"><span class="pre">chgrp</span></code> the newly created folders to your user and group.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pipeline_releases.html" class="btn btn-neutral float-right" title="Pipeline releases" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="running_jobs.html" class="btn btn-neutral float-left" title="Submitting jobs to the cluster" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, QBiC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>